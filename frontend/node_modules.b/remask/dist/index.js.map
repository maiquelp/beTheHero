{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { toPattern } from 'vanilla-masker'\n\nconst intl = {\n\tfallback: {\n\t\tcurrency: 'BRL',\n\t},\n\n\t'pt-BR': {\n\t\tcurrency: 'BRL',\n\t},\n}\n\nconst patterns = {\n\tcurrency: (\n\t\tvalue,\n\t\t{ language, ...options } = { language: window.navigator.language }\n\t) =>\n\t\tNumber(\n\t\t\tparseFloat(value.indexOf('.') > -1 ? value : value / 100)\n\t\t).toLocaleString(language, {\n\t\t\tstyle: 'currency',\n\t\t\tcurrency: intl[language]\n\t\t\t\t? intl[language].currency\n\t\t\t\t: intl.fallback.currency,\n\t\t\tcurrencyDisplay: 'symbol',\n\t\t\tminimumFractionDigits: 2,\n\t\t\t...options,\n\t\t}),\n\n\tpercent: value =>\n\t\tvalue &&\n\t\t`${parseFloat(value)\n\t\t\t.toFixed(2)\n\t\t\t.replace('.', ',')\n\t\t\t.replace(/(\\d)(?=(\\d{3})+,)/g, '$1.')} %`,\n}\n\nexport const unMask = (value, pattern) =>\n\tpattern === 'currency' ? value.replace(/\\D/g, '') : value.replace(/\\W/g, '')\n\nconst masker = (value, pattern, options) =>\n\ttoPattern(value, { pattern, ...options })\n\nconst maskChoose = (value, patterns, options) =>\n\tmasker(\n\t\tvalue,\n\t\tpatterns.reduce(\n\t\t\t(memo, pattern) => (value.length <= unMask(memo).length ? memo : pattern),\n\t\t\tpatterns[0]\n\t\t),\n\t\toptions\n\t)\n\nexport const mask = (value, pattern, options) =>\n\ttypeof pattern === 'string'\n\t\t? patterns[pattern]\n\t\t\t? patterns[pattern](value || '', options)\n\t\t\t: masker(value, pattern || '', options)\n\t\t: maskChoose(value, pattern, options)\n"],"names":["intl","fallback","currency","patterns","value","ref","language","window","navigator","Number","parseFloat","indexOf","toLocaleString","Object","style","currencyDisplay","minimumFractionDigits","options","percent","toFixed","replace","unMask","pattern","masker","toPattern","reduce","memo","length","maskChoose"],"mappings":"gCAAA,IAEMA,EAAO,CACZC,SAAU,CACTC,SAAU,eAGF,CACRA,SAAU,QAINC,EAAW,CAChBD,kBACCE,EACAC,kBAA2B,CAAEC,SAAUC,OAAOC,UAAUF,+KAExDG,OACCC,WAAWN,EAAMO,QAAQ,MAAQ,EAAIP,EAAQA,EAAQ,MACpDQ,eAAeN,EAAUO,kBAC1BC,MAAO,WACPZ,SAAUF,EAAKM,GACZN,EAAKM,GAAUJ,SACfF,EAAKC,SAASC,SACjBa,gBAAiB,SACjBC,sBAAuB,GACpBC,KAGLC,iBAASd,UACRA,GACGM,WAAWN,GACZe,QAAQ,GACRC,QAAQ,IAAK,KACbA,QAAQ,qBAAsB,cAGrBC,WAAUjB,EAAOkB,UACJlB,EAAMgB,QAAnB,aAAZE,EAAuC,MAA2B,MAApB,KAEzCC,WAAUnB,EAAOkB,EAASL,UAC/BO,YAAUpB,EAAOS,0BAAES,+CAYClB,EAAOkB,EAASL,SACjB,iBAAZK,EACJnB,EAASmB,GACRnB,EAASmB,GAASlB,GAAS,GAAIa,GAC/BM,EAAOnB,EAAOkB,GAAW,GAAIL,YAddb,EAAOD,EAAUc,UACpCM,EACCnB,EACAD,EAASsB,gBACPC,EAAMJ,UAAalB,EAAMuB,QAAUN,EAAOK,GAAMC,OAASD,EAAOJ,GACjEnB,EAAS,IAEVc,GAQEW,CAAWxB,EAAOkB,EAASL"}